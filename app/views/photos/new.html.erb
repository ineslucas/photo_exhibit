<% if current_user.photos.empty? %>
  <p>Welcome. Please add 8 photos to start with.</p>
  <%= form_with url: photos_path, local: true do |form| %>

    <% if @photos.any? && @photos.all? { |photo| photo.errors.any? } %>
      <div id="error_explanation">
        <h2><%= pluralize(@photos.flat_map(&:errors).count, "error") %> prohibited these photos from being saved:</h2>

        <ul>
          <% @photos.each do |photo| %>
            <% photo.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          <% end %>
        </ul>
      </div>
    <% end %>

    <% @photos.each_with_index do |photo, index| %>
      <%= form.fields_for "photos[]", photo, index: index do |photo_form| %>
        <div class="field"> <%# temp note: undefined class tbc%>
          <%= photo_form.label :title %>
          <%= photo_form.text_field :title %>
        </div>

         <div>
          <%# might need to be changed %>
          <%= photo_form.label :image %>
          <%= photo_form.file_field :image %>
        </div>

        <div class="field">
          <%= photo_form.label :journal_entry %>
          <%= photo_form.text_area :journal_entry %>
        </div>

        <div class="field">
          <%= photo_form.label :date_taken %>
          <%= photo_form.date_select :date_taken %>
        </div>
      <% end %>
    <% end %>

    <div class="actions">
      <%= form.submit %>
    </div>
  <% end %>

<% else %>
  <%# FORM TO ADD 1 PHOTO AT A TIME %>
  <h1>New Photo</h1>

  <%= form_with(model: @photo, local: true) do |form| %>
    <% if @photo.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@photo.errors.count, "error") %> prohibited this photo from being saved:</h2>

        <ul>
        <% @photo.errors.full_messages.each do |message| %> <%# temp note: that deanin does it a little differently here%>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field"> <%# temp note: undefined class tbc%>
      <%= form.label :title %>
      <%= form.text_field :title %>
    </div>

    <div>
      <%# might need to be changed %>
      <%= form.label :image %>
      <%= form.file_field :image %>
    </div>

    <div class="field">
      <%= form.label :journal_entry %>
      <%= form.text_area :journal_entry %>
    </div>

    <div class="field">
      <%= form.label :date_taken %>
      <%= form.date_select :date_taken %>
    </div>

    <div class="actions">
      <%= form.submit %>
    </div>
  <% end %>

  <%= link_to 'Back', photos_path %>
<% end %>
